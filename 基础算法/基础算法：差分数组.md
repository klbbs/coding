# 基础算法：差分数组

- ### 作用点：在数组一定范围内[l,r]同时加上同一个数，这样需要操作r-l+1次，但是使用差分数组，将只需要操作两次。

- ### 原理：差分数组S是用于记录原数组数据增量的数组，基本定义数组中第i个元素值为==S~i~=A~i~-A~i-1~==（A为原数组)

  ## 示例：在数组一定范围内均增加k,范围[l,r]

	``````c++
	int S[N]{0};
	for(int i=1;i<N;i++){
		S[A[l]] += k;
	    S[A[r+1]] -= k;
	}
	``````
#### 	这样就记录这次操作，如果想加入原数组，就是对应区间遍历+=

``````cpp
for(int i=1;i<N;i++){
	S[i] += S[i-1];
}
``````







## 后续添加：

### 前置：前缀和，定义S等于数组An的前缀和，需要求原数组An任意段 i 到 j  的和，只需求Si - Sj，需要注意的是，最好把S1设置为A0，因为为了方便统一，任意段都可以套用上面的Si-Sj，如果不是S不是从1开始，而是0的话，那么求前n项和为Sn-0，不满足Sn - S0，因为S0存储了A1的值，不注意可能会存在数组越界行为。

##### 虽然以上前置知识看起来简单，但是却很重要，对于操作：在区间[l,r]每个数加d，那么需要花费时间O(n),但是就像上面差分数组所做的，构造一个差分数组，就可以在O(1)完成这个操作。

### 拓展：二维前缀

#### 	Si,j 等于点(0,0)到点(i,j)所有数的和，如图：

​	![photo](C:\Users\kendas\Desktop\for_code_skill\photos\photos1.png)

#### 求点(x1,y1)到点(x2,y2)的所有和的公式如图

### 差分和前缀和是一种类似微分积分的关系，我们可以对原数组（相当于前缀和数组了）差分数组，也可以求原数组（此时它就相当于差分数组了）的前缀和

#### 二维差分和一维很类似，操作如图：

![photos](C:\Users\kendas\Desktop\for_code_skill\photos\photos2.png)

#### 图中bij就是差分数组，如果要在区间x1,y1到x2,y2加上一个值，那么就需要进行图上四步操作
